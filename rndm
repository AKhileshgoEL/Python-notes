import os
import datetime
from pathlib import Path

def delete_old_files(directory_path, file_pattern, days_to_keep):
    today = datetime.datetime.now()
    threshold_date = today - datetime.timedelta(days=days_to_keep)

    # Get a list of all files in the directory matching the specified pattern
    selected_files = Path(directory_path).glob(file_pattern)

    for file_path in selected_files:
        # Get the file's creation time
        creation_time = datetime.datetime.fromtimestamp(os.path.getctime(file_path))

        # Check if the file is older than the specified threshold date
        if creation_time < threshold_date:
            try:
                # Delete the file
                os.remove(file_path)
                print(f"Deleted: {file_path}")
            except Exception as e:
                print(f"Error deleting {file_path}: {e}")

# Example usage
directory_path = '/path/to/directory'
file_pattern = '*.txt'
days_to_keep = 5

delete_old_files(directory_path, file_pattern, days_to_keep)
